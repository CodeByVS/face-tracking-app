(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[256],{1808:()=>{},2487:()=>{},2859:(e,o,l)=>{"use strict";l.d(o,{A6:()=>s,Mh:()=>a,q1:()=>t});var r=l(7598);async function t(){let e="./models";try{console.log("[Model Loader] Starting model loading from: ".concat(e)),console.log("[Model Loader] Current environment: production"),console.log("[Model Loader] Verifying model files...");let o=["".concat(e,"/tiny_face_detector_model-weights_manifest.json"),"".concat(e,"/face_landmark_68_model-weights_manifest.json")];console.log("[Model Loader] Checking model manifests at:",o);let l=await Promise.allSettled(o.map(e=>fetch(e).then(e=>{if(!e.ok)throw Error("HTTP ".concat(e.status," ").concat(e.statusText));return e.json()})));l.forEach((e,l)=>{"fulfilled"===e.status?console.log("[Model Loader] Successfully loaded manifest: ".concat(o[l])):console.error("[Model Loader] Failed to load manifest ".concat(o[l],":"),e.reason)});let t=l.filter(e=>"rejected"===e.status);if(t.length>0)throw Error("Failed to load ".concat(t.length," model manifest(s). Check console for details."));let s=async function(e,o){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=null;for(let t=1;t<=l;t++)try{return console.log("[Model Loader] Loading ".concat(o," (attempt ").concat(t,"/").concat(l,")...")),await e(),console.log("[Model Loader] ".concat(o," loaded successfully")),!0}catch(e){r=e,console.warn("[Model Loader] Attempt ".concat(t," failed for ").concat(o,":"),e),t<l&&await new Promise(e=>setTimeout(e,1e3*t))}throw r||Error("Failed to load ".concat(o," after ").concat(l," attempts"))};return await s(()=>r.B0.tinyFaceDetector.loadFromUri(e),"TinyFaceDetector"),await s(()=>r.B0.faceLandmark68Net.loadFromUri(e),"FaceLandmark68Net"),console.log("[Model Loader] All models loaded successfully"),!0}catch(o){if(console.error("[Model Loader] Error loading models:",o),console.log("[Model Loader] Current URL:",window.location.href),console.log("[Model Loader] Current path:",window.location.pathname),console.log("[Model Loader] Model path:",e),console.log("[Model Loader] Environment:","production"),o instanceof Error)throw(o.message.includes("Failed to fetch")||o.message.includes("404"))&&(console.error("[Model Loader] Network error - the model files could not be loaded."),console.error("[Model Loader] Please check if the model files exist in the public/models directory.")),Error("Failed to load face detection models: ".concat(o.message));throw Error("An unknown error occurred while loading models")}}function s(){try{var e,o,l,t;let s=null!=(l=null==(e=r.B0.tinyFaceDetector)?void 0:e.isLoaded)&&l,a=null!=(t=null==(o=r.B0.faceLandmark68Net)?void 0:o.isLoaded)&&t;return s&&a||console.warn("[Model Loader] Some models are not loaded:",{tinyFaceDetector:s,faceLandmark68Net:a}),s&&a}catch(e){return console.error("[Model Loader] Error checking if models are loaded:",e),!1}}function a(){return{basePath:"./models",tinyFaceDetector:"".concat("./models","/tiny_face_detector_model-weights_manifest.json"),faceLandmark68:"".concat("./models","/face_landmark_68_model-weights_manifest.json")}}},4907:()=>{},6608:(e,o,l)=>{Promise.resolve().then(l.bind(l,7666))},7666:(e,o,l)=>{"use strict";l.r(o),l.d(o,{default:()=>d});var r=l(2273),t=l(5461),s=l(7598),a=l(2859);function d(){let[e,o]=(0,t.useState)("Initializing model loader..."),[l,d]=(0,t.useState)(null),[n,c]=(0,t.useState)(!0),[i,m]=(0,t.useState)(null),[h,g]=(0,t.useState)({});return(0,t.useEffect)(()=>{let e=(0,a.Mh)();m(e);let l=()=>{g({userAgent:window.navigator.userAgent,currentUrl:window.location.href,environment:"production",modelPaths:e,modelsLoaded:(0,a.A6)(),timestamp:new Date().toISOString()})};l(),(async()=>{try{if(o("Starting model loading process..."),l(),await (0,a.q1)(),l(),(0,a.A6)()){o("All models loaded successfully!"),c(!1),l();try{let e=document.createElement("canvas");e.width=300,e.height=300,o("Testing face detection with dummy canvas..."),l();let r=await s.R(e,new s.ex);console.log("Test detections:",r),l(),o(" Models loaded and working! Detected ".concat(r.length," faces in test."))}catch(e){console.warn("Test detection warning:",e),l(),o(" Models loaded but test detection failed. Check console for details.")}}else throw Error("Models did not load correctly")}catch(e){console.error("Error in testModels:",e),d(Error(e instanceof Error?e.message:"An unknown error occurred during model testing.")),c(!1),l()}})();let r=setInterval(l,2e3);return()=>clearInterval(r)},[]),(0,r.jsxs)("div",{className:"min-h-screen bg-gray-100 p-8",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Face API Model Loading Test"}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,r.jsxs)("div",{className:"mb-4 p-4 bg-blue-50 rounded",children:[(0,r.jsx)("h2",{className:"font-bold mb-2",children:"Test Status"}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded-full mr-2 ".concat(n?"bg-yellow-500":l?"bg-red-500":"bg-green-500")}),(0,r.jsx)("p",{className:"font-mono",children:e})]})]}),l&&(0,r.jsxs)("div",{className:"mt-4 p-4 bg-red-50 border-l-4 border-red-500",children:[(0,r.jsx)("h3",{className:"font-bold text-red-700",children:"Error Details:"}),(0,r.jsx)("pre",{className:"mt-2 p-3 bg-gray-100 rounded overflow-auto text-sm text-red-700",children:l.message}),(0,r.jsx)("p",{className:"text-red-500",children:"We couldn't load the models. Please check the following:"}),(0,r.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Please check the browser console (F12) for more detailed error information."})]}),(0,r.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded border",children:[(0,r.jsx)("h2",{className:"font-bold mb-2",children:"Debug Information"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:(0,r.jsx)("strong",{children:"Page URL:"})}),(0,r.jsx)("code",{className:"block p-2 bg-gray-100 rounded mt-1 overflow-x-auto text-xs",children:window.location.href})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:(0,r.jsx)("strong",{children:"Environment:"})}),(0,r.jsx)("code",{className:"block p-2 bg-gray-100 rounded mt-1",children:"production"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:(0,r.jsx)("strong",{children:"Base Models Path:"})}),(0,r.jsx)("code",{className:"block p-2 bg-gray-100 rounded mt-1 text-xs break-all",children:(null==i?void 0:i.basePath)||"Loading..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:(0,r.jsx)("strong",{children:"Models Loaded:"})}),(0,r.jsx)("code",{className:"block p-2 rounded mt-1 ".concat((0,a.A6)()?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:(0,a.A6)()?"✅ Yes":"❌ No"})]}),i&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:(0,r.jsx)("strong",{children:"TinyFaceDetector Path:"})}),(0,r.jsx)("code",{className:"block p-2 bg-gray-100 rounded mt-1 text-xs break-all",children:i.tinyFaceDetector})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:(0,r.jsx)("strong",{children:"FaceLandmark68 Path:"})}),(0,r.jsx)("code",{className:"block p-2 bg-gray-100 rounded mt-1 text-xs break-all",children:i.faceLandmark68})]})]})]}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsxs)("details",{className:"border rounded p-2",children:[(0,r.jsx)("summary",{className:"font-medium cursor-pointer",children:"Raw Debug Data"}),(0,r.jsx)("pre",{className:"mt-2 p-2 bg-gray-100 rounded text-xs overflow-auto max-h-48",children:JSON.stringify(h,null,2)})]})})]}),(0,r.jsxs)("div",{className:"mt-6 p-4 bg-yellow-50 border-l-4 border-yellow-500",children:[(0,r.jsx)("h3",{className:"font-bold text-yellow-700",children:"Troubleshooting Tips"}),(0,r.jsxs)("ul",{className:"list-disc pl-5 mt-2 space-y-1 text-sm",children:[(0,r.jsxs)("li",{children:["Ensure the model files exist in the ",(0,r.jsx)("code",{children:"public/models"})," directory"]}),(0,r.jsx)("li",{children:"Check the browser's Network tab to see if the model files are being requested"}),(0,r.jsx)("li",{children:"Verify file permissions for the model files"}),(0,r.jsx)("li",{children:"Try clearing your browser cache and refreshing the page"})]})]})]})]})}},8984:()=>{}},e=>{e.O(0,[375,38,970,804,358],()=>e(e.s=6608)),_N_E=e.O()}]);